## Бот-помощник для растений

Telegram бот

Есть 15 комнатных растений, разных размеров и разной периодичности полива

Для каждого есть фото, название, ожидаемые периоды полива и проверок, пересушить vs недополить, опционально доп инфо

Ведется гугл таблица с пометкой по каждому растению, чтобы, в случае сбоя, понять, что про какое-то растение бот забыл 

У каждого растения может быть 4 статуса:
- сегодня полили
- почва очень влажная
- почва слегка влажная
- почва сухая

Каждый день в определенный час бот проверяет, каким растениям нужна проверка или полив  

Это происходит по следующим алгоритмам:
Если цветок полили сегодня?
Если да, откладываем проверку до определенного дня (из карточки растения, для каких то цветов это может быть 4 дня, дня каких то 7)
Если вчера почва очень влажная, откладываем проверку также на время из карточки
Аналогично для слегка влажной
Если почва сухая, проверяем предпочтения пересушить vs недополить. Если пересушить, планируем отправку уведомления о поливе на следующий день. Если недополить -- присылаем уведомление о необходимости полить  

Получается своеобразный динамический календарь

Что видит пользователь:
На каждое растение, по которому запланировано на сегодняшний день какое-то действие (полив/проверка), приходит сообщение с кнопками
Сообщение содержит название цветка, вопрос про влажность почвы или просьбу полить цветок  
Кнопки на вопрос:
- очень влажная
- немного влажная
- сухая
- как выглядит цветок?

Кнопки на просьбу полить:
- done ✅
- как выглядит цветок?

При нажатии на кнопку "Как выглядит цветок?" в чате отображается картинка цветка из профиля с его названием

Остальные кнопки при этом остаются функциональными

При выборе варианта ответа с почвой или done, кнопки пропадают или становятся неактивными и появляется кнопка "исправить ответ"

Также надо предусмотреть меню, по которому можно в любой момент задать вопрос про то, как выглядит цветок

### Напоминания и игнорирование

Если пользователь не ответил на сообщение до 18:00 — присылаем напоминание.

Если пользователь игнорирует вопрос — уведомление переносится на следующий день в дополнение к запланированным.

Если игнор просьбы о поливе больше 2 дней — сообщение о поливе должно быть с эмодзи ‼️ (восклицательные знаки).

### Расписание уведомлений

- **11:00** — ежедневные уведомления о проверке/поливе
- **18:00** — напоминания о неотвеченных сообщениях
- **23:59** — перенос неотвеченных на следующий день

### Многопользовательский доступ

Бот поддерживает несколько пользователей с разными ролями:

- **Админы** — все пользователи из `ADMIN_USER_IDS` имеют доступ к боту, могут просматривать растения и менять их статусы
- **Активный поливальщик** — пользователь из `ACTIVE_WATERER_ID` получает ежедневные уведомления и напоминания о поливе

Это позволяет нескольким людям управлять растениями, но уведомления получает только один — тот, кто сейчас отвечает за полив.

---

## Технический стек

- **Язык:** Python 3.11+
- **Telegram:** aiogram 3.x
- **База данных:** SQLite (статусы растений, настройки пользователя)
- **Профили растений:** JSON-файл
- **Планировщик:** APScheduler
- **Google Sheets:** gspread + google-auth
- **Хостинг:** Railway

---

## Конфигурация (.env)

```env
# Telegram Bot
BOT_TOKEN=your_bot_token_here

# Пользователи (ID через запятую)
ADMIN_USER_IDS=123456789,987654321,555555555
ADMIN_NAMES=Сима,Петя,Вася
ACTIVE_WATERER_ID=123456789

# Google Sheets (опционально)
GOOGLE_SHEETS_ENABLED=false
GOOGLE_SHEETS_SPREADSHEET_ID=
GOOGLE_SHEETS_CREDENTIALS_BASE64=

# Время (опционально, по умолчанию 11:00 и 18:00)
NOTIFICATION_TIME=11:00
REMINDER_TIME=18:00
TIMEZONE=Europe/Moscow
```

**Важно:**
- `ADMIN_USER_IDS` и `ADMIN_NAMES` должны быть в одинаковом порядке
- `ACTIVE_WATERER_ID` должен быть одним из `ADMIN_USER_IDS`
- Чтобы сменить активного поливальщика — измените `ACTIVE_WATERER_ID` и перезапустите бота

